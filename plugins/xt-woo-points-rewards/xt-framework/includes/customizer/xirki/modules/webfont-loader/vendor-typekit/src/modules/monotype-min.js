goog.provide("webfont.modules.Monotype");goog.require("webfont.Font");webfont.modules.Monotype=function(domHelper,configuration){this.domHelper_=domHelper;this.configuration_=configuration};webfont.modules.Monotype.NAME="monotype";webfont.modules.Monotype.HOOK="__mti_fntLst";webfont.modules.Monotype.SCRIPTID="__MonotypeAPIScript__";webfont.modules.Monotype.CONFIGURATION="__MonotypeConfiguration__";goog.scope(function(){var Monotype=webfont.modules.Monotype,Font=webfont.Font;Monotype.prototype.getScriptSrc=function(projectId,version){var api=this.configuration_["api"]||"https://fast.fonts.net/jsapi";return api+"/"+projectId+".js"+(version?"?v="+version:"")};Monotype.prototype.load=function(onReady){var self=this;var projectId=self.configuration_["projectId"];var version=self.configuration_["version"];function checkAndLoadIfDownloaded(){if(loadWindow[Monotype.HOOK+projectId]){var mti_fnts=loadWindow[Monotype.HOOK+projectId](),fonts=[],fntVariation;if(mti_fnts){for(var i=0;i<mti_fnts.length;i++){var fnt=mti_fnts[i]["fontfamily"];if(mti_fnts[i]["fontStyle"]!=undefined&&mti_fnts[i]["fontWeight"]!=undefined){fntVariation=mti_fnts[i]["fontStyle"]+mti_fnts[i]["fontWeight"];fonts.push(new Font(fnt,fntVariation))}else{fonts.push(new Font(fnt))}}}onReady(fonts)}else{setTimeout(function(){checkAndLoadIfDownloaded()},50)}}if(projectId){var loadWindow=self.domHelper_.getLoadWindow();var script=this.domHelper_.loadScript(self.getScriptSrc(projectId,version),function(err){if(err){onReady([])}else{loadWindow[Monotype.CONFIGURATION+projectId]=function(){return self.configuration_};checkAndLoadIfDownloaded()}});script["id"]=Monotype.SCRIPTID+projectId}else{onReady([])}}});